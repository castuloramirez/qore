#!/usr/bin/env qore

%requires ../../../../qlib/FsUtil.qm
%requires ../../../../qlib/QUnit.qm

%new-style
%require-types
%enable-all-warnings

%exec-class BasenameTest

public class BasenameTest inherits QUnit::Test {
    constructor() : Test ("BasenameTest", "1.0") {
        addTestCase ("Basename test", \test_basename());
        addTestCase ("Basename test Posix", \test_basename_posix());
        addTestCase ("Basename test Windows", \test_basename_win());
        set_return_value(main());
    }

    test_basename() {
        string path;
        if (Platform.Windows)
            path = 'C:\path\to\file.txt';
        else
            path = "/path/to/file.txt";
        assertEq("file.txt", basename(path));
    }

    test_basename_posix() {
        assertEq("file.txt", new PosixPathHandler().basename("/path/to/file.txt"));
    }

    test_basename_win() {
        assertEq("file.txt", new WinPathHandler().basename('C:\path\to\file.txt'));
    }

}
