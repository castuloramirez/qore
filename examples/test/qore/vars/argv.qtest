#!/usr/bin/env qore
%require-types
%enable-all-warnings
%requires UnitTest

my UnitTest $unit();
no_parameter_test();
parameter_and_shift_test(1, 2);
shift_test(1, test3()[1], 3, 4, "hello");
one_parameter_shift_test(1);

sub no_parameter_test(any $p) {
    $unit.cmp($p, NOTHING, "non-existent parameter");
}

sub parameter_and_shift_test(int $p) {
    $unit.cmp($p, 1, "parameter before shift");
    $unit.cmp(shift $argv, 2, "shift on second parameter");
}

sub one_parameter_shift_test() {
    $unit.cmp(shift $argv, 1, "one parameter shift");
}

sub shift_test() {
    my list $var = (1, 2, 3, 4, "hello");
    foreach my any $v in ($var)
	$unit.cmp($v, shift $argv, ("shift " + string($v) + " parameter"));
}

list sub test3() {
    return (1, 2, 3);
}
